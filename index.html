<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sesión 4 – Rasgueo en corcheas</title>

<style>
:root{
  --bg:#141414;
  --verde:#00c853;
  --violeta:#b388ff;
  --naranja:#ff9800;
  --gris:#777;
}

body{
  margin:0;
  background:var(--bg);
  color:#fff;
  font-family:Arial,sans-serif;
}

.page{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
}

header{
  text-align:center;
  margin-top:24px;
}

header img{
  width:160px;
  max-width:70%;
  margin-bottom:12px;
}

h1{
  margin:0;
  color:#00e676;
  font-size:26px;
}

.subtitle{
  font-style:italic;
  color:var(--violeta);
  margin-bottom:28px;
}

.exercise-title{
  font-size:22px;
  margin-bottom:18px;
}

/* FILA DE TIEMPOS */
.times{
  display:flex;
  gap:28px;
  font-size:36px;
}

.times span{
  color:var(--gris);
}

.times .num.active{
  color:var(--naranja);
}

.times .and.active{
  color:#ccc;
}

/* FILA DE FLECHAS */
.arrows{
  display:flex;
  gap:28px;
  font-size:42px;
  margin-top:14px;
}

.arrow{
  color:#444;
}

.arrow.down.active{
  color:var(--verde);
}

.arrow.up.active{
  color:var(--violeta);
}

/* CONTROLES */
.controls{
  margin-top:28px;
  display:flex;
  gap:16px;
}

button{
  background:#00c853;
  color:#000;
  border:none;
  padding:16px 42px;
  font-size:18px;
  font-weight:600;
  border-radius:14px;
  cursor:pointer;
  box-shadow:0 4px 0 #009624;
  transition:transform 0.08s ease, box-shadow 0.08s ease;
}

button:active{
  transform:translateY(3px);
  box-shadow:0 1px 0 #009624;
}

.bpm{
  margin-top:18px;
  text-align:center;
}

input[type=range]{
  width:260px;
}

.note{
  margin-top:24px;
  font-size:14px;
  color:#aaa;
  max-width:520px;
  text-align:center;
}

@media(max-width:600px){
  .times{font-size:28px;gap:18px;}
  .arrows{font-size:34px;gap:18px;}
}
</style>
</head>

<body>
<div class="page">

<header>
  <img src="https://static.wixstatic.com/media/b4a607_0927246f3864402c8d6d2d56723b8bba~mv2.png">
  <h1>Prácticas guiadas – Sesión 4</h1>
  <div class="subtitle">El motor ya está en marcha</div>
</header>

<div class="exercise-title">Rasgueo base – Corcheas</div>

<!-- TIEMPOS -->
<div class="times">
  <span class="num">1</span>
  <span class="and">y</span>
  <span class="num">2</span>
  <span class="and">y</span>
  <span class="num">3</span>
  <span class="and">y</span>
  <span class="num">4</span>
  <span class="and">y</span>
</div>

<!-- FLECHAS -->
<div class="arrows">
  <span class="arrow down">↓</span>
  <span class="arrow up">↑</span>
  <span class="arrow down">↓</span>
  <span class="arrow up">↑</span>
  <span class="arrow down">↓</span>
  <span class="arrow up">↑</span>
  <span class="arrow down">↓</span>
  <span class="arrow up">↑</span>
</div>

<div class="controls">
  <button id="play">Play</button>
  <button id="stop">Stop</button>
</div>

<div class="bpm">
  BPM: <span id="bpmVal">40</span><br>
  <input type="range" min="30" max="70" value="40" id="bpm">
</div>

<div class="note">
  Los sonidos que escuchás no corresponden a ningún acorde.<br>
  Son cuerdas tocadas al aire y se usan solo como referencia rítmica.
</div>

</div>

<script>
let step = 0;
let timer = null;
let playing = false;

const nums = document.querySelectorAll(".num");
const ands = document.querySelectorAll(".and");
const arrows = document.querySelectorAll(".arrow");

const bpmInput = document.getElementById("bpm");
const bpmVal = document.getElementById("bpmVal");

bpmInput.oninput = () => bpmVal.textContent = bpmInput.value;

/* AUDIO REAL */
const downSound = new Audio("down.wav");
const upSound   = new Audio("up.wav");

downSound.volume = 0.85;
upSound.volume   = 0.6;

function play(sound){
  if (!sound.paused && bpmInput.value >= 60) {
    sound.currentTime = 0;
  }
  sound.play();
}

function clearVisuals(){
  nums.forEach(n=>n.classList.remove("active"));
  ands.forEach(a=>a.classList.remove("active"));
  arrows.forEach(a=>a.classList.remove("active"));
}

function tick(){
  clearVisuals();

  const pulse = Math.floor(step/2);
  const isAnd = step%2===1;

  if(!isAnd){
    nums[pulse].classList.add("active");
    arrows[step].classList.add("active");
    play(downSound);
  }else{
    ands[pulse].classList.add("active");
    arrows[step].classList.add("active");
    play(upSound);
  }

  step = (step+1)%8;
}

document.getElementById("play").onclick = ()=>{
  if(playing) return;
  playing = true;
  step = 0;
  tick(); // arranca en 1 fuerte
  const interval = (60000/bpmInput.value)/2;
  timer = setInterval(tick, interval);
};

document.getElementById("stop").onclick = ()=>{
  playing = false;
  clearInterval(timer);
  clearVisuals();
};
</script>

</body>
</html>
